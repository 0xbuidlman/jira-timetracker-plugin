#*
 * Copyright (C) 2011 Everit Kft. (http://www.everit.org)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *#
                <div id="detailsModule" class="module toggle-wrap expanded">
                    <div id="detailsModuleHeading" class="mod-header">
                        <span class="aui-icon aui-icon-small aui-iconfont-expanded"></span>
                        <h2 class="toggle-title"  onclick="everit.reporting.main.toggleModContent('details')">Work Log Details</h2>
                    </div>
                    <div class="mod-content">
                        <div class="aui-group aui-group-split action-button-container">
                            <div class="aui-item">
                                <button class="aui-button aui-button-subtle aui-dropdown2-trigger" id="details-groupby">Group by</button>                        
                            </div>
                            <div class="aui-item">
                                <button class="aui-button aui-button-subtle aui-dropdown2-trigger" id="details-columns">Columns</button>
                                <a id="worklogDetailsExportButton" href="#worklogDetailsExportDropDown" aria-owns="worklogDetailsExportDropDown" aria-haspopup="true" class="criteria-selector aui-button aui-button-subtle drop-arrow aui-dropdown2-trigger">
                                  <span class="aui-icon aui-icon-small aui-iconfont-export"></span>
                                  <span class="button-label">Export</span>
                                </a>
	                            <div id="worklogDetailsExportDropDown" class="aui-style-default aui-dropdown2">
	                              <div class="jttr-filter-field">
	                                <div class='ajs-layer box-shadow'>
	                                  <div data-query>
	                                    <div class='form-body checkboxmultiselect-container'>
	                                      <div class='field-group aui-field-issuetype'>
	                                        <ul class="aui-list-section">
	                                          <li class="aui-list-item">
	                                            <a id="detials-all-export" class="aui-list-item-link" target="_blank" href="#" data-jttp-href="/rest/jttp-rest/1/download-report/downloadWorklogDetailsReport" onclick="everit.reporting.main.updateDetailsAllExportHref()">Export all</a>
	                                          </li>
	                                          <li class="aui-list-item">
	                                            <a id="detials-custom-export" class="aui-list-item-link" target="_blank" href="#" data-jttp-href="/rest/jttp-rest/1/download-report/downloadWorklogDetailsReport" onclick="everit.reporting.main.updateDetailsCustomExportHref()">Export custom</a>
	                                          </li>
	                                        </ul>
	                                      </div>
	                                    </div>
	                                  </div>
	                                </div>
	                              </div>
	                            </div>
                            </div>
                        </div>
                        <div class="details-tale-container">
                            <table class="aui reporting-table">
                                <thead>
                                    <tr class="rowHeader">
                                        <th>Project</th>
                                        <th>Project Description</th>
                                        <th>Issue Key</th>
                                        <th>Issue Summary</th>
                                        <th>Type</th>
                                        <th>Status</th>
                                        <th>Priority</th>                                        
                                        <th>Assignee</th>
                                        <th>Reporter</th>
                                        <th>Estimated</th>
                                        <th>Remaining</th>
                                        <th>Created</th>
                                        <th>Updated</th>
                                        <th>Component/s</th>
                                        <th>Affected version/s</th>
                                        <th>Fix version/s</th>
                                        <th>Resolution</th>
                                        <th>Work Description</th>
                                        <th>User</th>
                                        <th>Start time</th>
                                        <th>Time Spent</th>
                                        <th>Worklog Created</th>
                                        <th>Worklog Updated</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    #foreach ( $wd in $worklogDetails )
                                    <tr>
                                        <td>$wd.projectName</td>
                                        <td>$wd.projectDescription</td>
                                        <td>$wd.issueKey</td>
                                        <td>$wd.issueSummary</td>
                                        <td>$wd.issueTypeName</td>
                                        <td>$wd.issueStatusName</td>
                                        <td>$wd.priorityName</td>
                                        <td>#if ( !$wd.issueAssignee ) Unassigneed #else $wd.issueAssignee #end</td>
                                        <td>$wd.issueReporter</td>
                                        <td>#if ( !$wd.issueOriginalEstimate ) #else $durationFormatter.exactDuration($wd.issueOriginalEstimate) #end</td>
                                        <td>#if ( !$wd.issueRemainingEstimate ) #else $durationFormatter.exactDuration($wd.issueRemainingEstimate) #end</td>
                                        <td>$outlookDate.formatDMY($wd.issueCreated)</td>
                                        <td>$outlookDate.formatDMY($wd.issueUpdated)</td>
                                        <td>#if ( !$wd.issueComponents.isEmpty() ) #foreach ( $component in $wd.issueComponents )#if($velocityCount> 1),#end $component#end #end</td>
                                        <td>#if ( !$wd.issueAffectedVersions.isEmpty() ) #foreach ( $affectedVersion in $wd.issueAffectedVersions )#if($velocityCount> 1),#end $affectedVersion #end #end</td>
                                        <td>#if ( !$wd.issueFixedVersions.isEmpty() ) #foreach ( $fixedVersion in $wd.issueFixedVersions )#if($velocityCount> 1),#end $fixedVersion #end #end</td>
                                        <td>#if ( !$wd.resolutionName ) Unresolved #else $wd.resolutionName #end</td>
                                        <td>$wd.worklogBody</td>
                                        <td>$wd.worklogUser</td>
                                        <td>$outlookDate.formatDMYHMS($wd.worklogStartDate)</td>
                                        <td>$durationFormatter.exactDuration($wd.worklogTimeWorked)</td>
                                        <td>$outlookDate.formatDMY($wd.worklogCreated)</td>
                                        <td>$outlookDate.formatDMY($wd.worklogUpdated)</td>
                                    </tr>
                                    #end
                                </tbody>
                            </table>
                        </div>
                        <div class="aui-group aui-group-split count-pagination">
                            <div class="aui-item">
                                <span class="results-count-text">
                                    <span class="results-count results-count-start">1</span> â€“
                                    <span class="results-count results-count-end">50</span> of 
                                    <span class="results-count results-count-total results-count-link">100</span>
                                    <span>$jsonFilterCondition</span>
                                </span>
                            </div>
                            <div class="aui-item">
                                <div class="pagination"> 
                                    #if ( $newActPageNumber > 1 )
                                    <a href="javascript:void(0);">
                                        <span class="aui-icon aui-icon-small aui-iconfont-arrows-left"></span>
                                    </a>
                                    #end
                                    #if ( $newActPageNumber < 3 )
                                      #foreach ( $page in [1..$maxPageNumber] ) 
                                        #if ( $page < 6)
                                          #if ( $newActPageNumber == $page )
                                    <b>$page</b>
                                          #else
                                    <a href="javascript:void(0);" onclick="getPage(($page * $filterCondition.limit) - $filterCondition.limit)">$page</a>
                                          #end
                                        #end
                                      #end
                                    #else
                                      #foreach ( $page in [1..$maxPageNumber] ) 
                                        #if ( $newActPageNumber + 3 > $page && $page > $newActPageNumber - 3 )
                                          #if ( $newActPageNumber == $page )
                                    <b>$page</b>
                                          #else
                                    <a href="javascript:void(0);" onclick="getPage(($page * $filterCondition.limit) - $filterCondition.limit)">$page</a>
                                          #end
                                        #end
                                      #end
                                    #end
                                    #if ( $newActPageNumber < $maxPageNumber )
                                    <a href="javascript:void(0);">
                                        <span class="aui-icon aui-icon-small aui-iconfont-arrows-right"></span>
                                    </a>
                                    #end
                                </div>
                            </div>
                        </div>
                    </div>            
                </div>